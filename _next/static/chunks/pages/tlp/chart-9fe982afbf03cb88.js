(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{3650:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return v}});var s=l(7294),i=l(7222),o=l(5825),r=function(){var e=(0,s.useRef)(null),t=(0,s.useState)(null),l=t[0],r=t[1],n=(0,s.useState)(0),a=n[0],c=n[1],d=(0,s.useState)(-1),f=d[0],v=d[1],u=(0,s.useState)(-1),h=u[0],g=u[1],p=(0,s.useState)(-1),x=p[0],m=p[1],y=(0,s.useState)(-1),R=y[0],_=y[1],j=(0,s.useState)(0),S=j[0],b=j[1],w=S>0?S+1:S<0?1/-(S-1):1,M=(0,o.Z)(),C=M.record,T=M.setActiveByIdx,B=M.getRecordByIdx,P=M.handleChangeTicker,D=M.update,k=M.totalSeed;(0,s.useEffect)((function(){e.current&&r(e.current.getContext("2d"))}),[]),(0,s.useEffect)((function(){if(l&&e.current){var t=1,s=C.slice(a,a+200/w).map((function(e){var l=e.date,s=e.accEarns,i=e.low,o=e.high,r=e.open,n=e.close,a=e.split,c=e.first,d=e.second,f=e.third;return a&&(t*=a),{date:l,accEarns:s,split:a,low:i*t,high:o*t,open:r*t,close:n*t,first:c?{costBasis:c.costBasis*t,over10:c.costBasis*t*1.1,earn:c.earnDiff,progress:c.progressRate,winloss:c.winloss}:null,second:d?{costBasis:d.costBasis*t,over5:d.costBasis*t*1.05,over10:d.costBasis*t*1.1,earn:d.earnDiff,progress:d.progressRate,winloss:d.winloss}:null,third:f?{costBasis:f.costBasis*t,over5:f.costBasis*t*1.05,over10:f.costBasis*t*1.1,earn:f.earnDiff,progress:f.progressRate,winloss:f.winloss}:null}})),o=.9*s.reduce((function(e,t){var l=t.low,s=t.open,i=t.close,o=t.high;return Math.min(l,s,i,o,e)}),Number.MAX_VALUE),r=1.1*s.reduce((function(e,t){var l=t.low,s=t.open,i=t.close,o=t.high;return Math.max(l,s,i,o,e)}),Number.MIN_VALUE);m(o/t),_(r/t);var n=function(e){return Math.floor(500*i.Z.normalize(e,o,r))};s.forEach((function(e,t){e.low=n(e.low),e.high=n(e.high),e.close=n(e.close),e.open=n(e.open),e.first&&(e.first.over10=n(e.first.over10),e.first.costBasis=n(e.first.costBasis)),e.second&&(e.second.costBasis=n(e.second.costBasis),e.second.over5=n(e.second.over5),e.second.over10=n(e.second.over10)),e.third&&(e.third.costBasis=n(e.third.costBasis),e.third.over5=n(e.third.over5),e.third.over10=n(e.third.over10))})),l.clearRect(0,0,9999,9999);var d=520;s.forEach((function(e,t){var s=e.date,i=6*t*w,o=new Date(s);o.toISOString().substring(0,7);o.getMonth()%2&&o.getMonth()%2&&(l.fillStyle="#fafafa",l.fillRect(i,0,6*w,770))})),l.clearRect(0,501,9999,20);var f=new Date(s[0].date).getMonth(),v=new Date(s[0].date).getFullYear();s.forEach((function(e,t){var s=e.date,i=6*t*w,o=new Date(s),r=o.toISOString().substring(0,7),n=o.getMonth(),a=o.getFullYear();l.fillStyle="#7a7a7a",l.textBaseline="hanging",l.font="12px sans",f!==n&&S>=0?(l.font="12px sans",l.fillText(r,i,502),f=n):v!==a&&S<0?(l.font="bold 12px sans",l.fillText(String(a),i,502),f=n,v=a):f!==n&&(S>=-1||(n+1)%2)&&(l.font="12px sans",l.fillText(String(n+1),i,502),f=n)})),l.fillStyle="#bebebe",l.fillRect(0,500,1200,1),l.fillRect(0,d,1200,1),l.fillRect(0,570,1200,1),l.fillRect(0,620,1200,1),l.fillRect(0,670,1200,1),l.fillRect(0,770,1200,1),l.fillRect(1200,0,1,501),l.fillRect(1200,d,1,251);for(var u=k,h=1;h<10;h++)l.fillStyle="#f5f5f5",l.fillRect(0,50*h,1200,1);s.forEach((function(e,t){var o,r,n,a,c,f,v,h,g,p=e.split,x=(e.date,e.accEarns),m=e.low,y=e.high,R=e.open,_=e.close,j=e.first,S=e.third,b=e.second,M=6*t*w;if(!j&&null!==(o=s[t-1])&&void 0!==o&&o.first){var C=s[t-1].first;l.fillStyle="rgba(67,142,255,0.3)",l.fillRect(M,500-C.over10,6*w,C.over10-C.costBasis)}else j&&(l.fillStyle="rgba(67,142,255,0.3)",l.fillRect(M,500-j.over10,6*w,j.over10-j.costBasis),l.fillStyle=i.Z.getProgressColor(j.progress),l.fillRect(M,570,6*w,-j.progress/2+1),j.earn&&(l.strokeStyle="rgb(80,151,255)",l.beginPath(),l.moveTo(M,d),l.lineTo(M,570),l.stroke(),l.closePath()));if(!b&&null!==(r=s[t-1])&&void 0!==r&&r.second){var T=s[t-1].second;l.fillStyle="rgba(255,174,67,0.3)",l.fillRect(M,500-T.over10,6*w,T.over10-T.over5),l.fillRect(M,500-T.over10,6*w,T.over10-T.costBasis)}else b&&(l.fillStyle="rgba(255,174,67,0.3)",l.fillRect(M,500-b.over10,6*w,b.over10-b.over5),l.fillRect(M,500-b.over10,6*w,b.over10-b.costBasis),l.fillStyle=i.Z.getProgressColor(b.progress),l.fillRect(M,620,6*w,-b.progress/2+1),b.earn&&(l.strokeStyle="rgb(80,151,255)",l.beginPath(),l.moveTo(M,571),l.lineTo(M,620),l.stroke(),l.closePath()));if(!S&&null!==(n=s[t-1])&&void 0!==n&&n.third){var B=s[t-1].third;l.strokeStyle="rgba(230,67,255,0.58)",l.fillStyle="rgba(202,67,255,0.3)",l.fillRect(M,500-B.over10,6*w,B.over10-B.costBasis)}else S&&(l.fillStyle="rgba(202,67,255,0.3)",l.fillRect(M,500-S.over10,6*w,S.over10-S.costBasis),l.fillRect(M,500-S.over10,6*w,S.over10-S.over5),l.fillStyle=i.Z.getProgressColor(S.progress),l.fillRect(M,670,6*w,-S.progress/2+1),S.earn&&(l.strokeStyle="rgb(80,151,255)",l.beginPath(),l.moveTo(M,621),l.lineTo(M,670),l.stroke(),l.closePath()));l.fillStyle=R<_?"#e51a1c":"#0f7cc4",l.fillRect(M+2*w,500-y,1,y-m),l.fillRect(M,500-Math.max(R,_),5*w,Math.max(Math.abs(_-R),1));var P=u+x,D=Math.ceil(u/P*100),k=Math.floor(x/P*100);l.fillStyle="rgba(196,140,0,0.3)",l.fillRect(M,671,6*w,k),l.fillStyle="rgba(0,77,196,0.3)",l.fillRect(M,770,6*w,-D);var E=null!==(a=null===j||void 0===j?void 0:j.winloss)&&void 0!==a?a:0,N=null!==(c=null===b||void 0===b?void 0:b.winloss)&&void 0!==c?c:0,L=null!==(f=null===S||void 0===S?void 0:S.winloss)&&void 0!==f?f:0;E=E>0?0:E,N=N>0?0:N,L=L>0?0:L;var Z=(null!==(v=null===j||void 0===j?void 0:j.winloss)&&void 0!==v?v:0)/1e3,Y=(null!==(h=null===b||void 0===b?void 0:b.winloss)&&void 0!==h?h:0)/1e3,I=(null!==(g=null===S||void 0===S?void 0:S.winloss)&&void 0!==g?g:0)/1e3;Z=Z>0?0:Z,Y=Y>0?0:Y,I=I>0?0:I;var O=Math.floor((P+E+N+L)/P*100),X=Math.floor(Z+Y+I);l.fillStyle="rgba(196,0,0,0.3)",l.fillRect(M,671,6*w,100-O),l.fillRect(M,671,6*w,-X),p&&(l.beginPath(),l.strokeStyle="red",l.fillStyle="red",l.moveTo(M+3*w,0),l.lineTo(M+3*w,500),l.stroke(),l.closePath(),l.textBaseline="bottom",l.font="12px sans",l.fillText("\uc561\uba74\ubd84\ud560(".concat(p,":1)"),M+5,500))})),l.clearRect(1201,0,1e3,1e3),l.fillStyle="#bebebe";for(var g=r-o,p=(Math.floor(g/10),1);p<10;p++)l.fillRect(1201,50*p,3,1),l.font="12px sans",l.textBaseline="middle",l.fillText("".concat(i.Z.dropDecimal((r-g*p*.1)/t,2)),1210,50*p);l.fillRect(0,0,1,501),l.fillRect(0,0,1201,1),l.fillRect(0,d,1,251);var x=function(e){e.preventDefault();var t=a+(e.deltaY>0?10:-10)/w;c(Math.min(Math.max(0,t),C.length-Math.floor(200/w)))};return e.current.addEventListener("wheel",x),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("wheel",x)}}}),[l,a,C]);var E=C[a]?new Date(C[a].date).toISOString().substring(0,7):"";return{canvasRef:e,handleClickCanvas:function(e){var t=e.currentTarget.getBoundingClientRect(),l=t.x,s=t.y,i=e.pageX-l,o=e.pageY-s;if(i<1200&&o<500){var r=Math.floor(i/(6*w));T(C.slice(a)[r].idx)}},handleMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),l=t.x,s=t.y,i=e.pageX-l,o=e.pageY-s,r=Math.floor(i/(6*w));i<1200&&o<500?(v(r),g(o)):i<1200?(v(r),g(-1)):(v(-1),g(-1))},mouseX:f,mouseY:h,handleMouseOut:function(){v(-1),g(-1)},getMouseRecord:function(){if(C.slice(a)[f])return B(C.slice(a)[f].idx)},getMousePrice:function(){return R-(R-x)*h/500},handleChangeTicker:function(e){c(0),P(e)},addZoom:function(e){var t=Math.max(Math.min(S+e,4),-4);b(t),D()},zoom:w,handleChangeDate:function(e){var t=new Date(e).getTime(),l=C.findIndex((function(e){return e.date>=t})),s=C.length-200/w;c(-1===l?s:Math.min(s,l))},startDate:E,totalSeed:k}},n=l(5628),a=l.n(n),c=l(5893),d=function(e){return{color:e>0?"red":e<0?"blue":void 0}},f=function(){var e=r(),t=e.canvasRef,l=e.handleClickCanvas,s=e.handleMouseMove,n=e.mouseX,f=e.mouseY,v=e.handleMouseOut,u=e.getMouseRecord,h=e.getMousePrice,g=e.handleChangeTicker,p=e.zoom,x=e.addZoom,m=e.startDate,y=e.handleChangeDate,R=e.totalSeed,_=function(e,t){return e?(0,c.jsxs)("div",{style:{top:520+50*t,left:6*n*p+10},className:a().pig,children:[(0,c.jsxs)("div",{style:{fontWeight:"bold"},children:[e.day,"\uc77c \ucc28",!e.progressRate&&" - \uc885\ub8cc"]}),!!e.progressRate&&(0,c.jsxs)("div",{children:["\uc9c4\ud589\ub960 : ",e.progressRate,"%"]}),!e.earnDiff&&(0,c.jsxs)("div",{children:["\uc190\uc775\ub960 : ",(0,c.jsxs)("span",{style:d(e.boughtRate),children:[e.boughtRate>=0&&"+",e.boughtRate,"%"]})]}),!!e.earnDiff&&(0,c.jsxs)("div",{children:["\uc218\uc775\uae08 : ",(0,c.jsxs)("span",{style:{color:"red"},children:[i.Z.dropDecimal(e.earnDiff,2),"$"]})]})]}):null};return(0,c.jsxs)("div",{className:a().graphWrap,children:[(0,c.jsxs)("div",{className:a().zoom,children:[(0,c.jsxs)("div",{children:["\ub0a0\uc9dc: ",(0,c.jsx)("input",{type:"month",value:m,onChange:function(e){return y(e.currentTarget.value)}})]}),(0,c.jsxs)("div",{children:["\ud655\ub300: ",(0,c.jsx)("button",{onClick:function(){return x(-1)},children:"-"}),(0,c.jsx)("button",{onClick:function(){return x(1)},children:"+"})]})]}),(0,c.jsxs)("div",{className:a().legend,children:[(0,c.jsx)("div",{style:{top:520,left:1235},children:"\uccab\uc9f8"}),(0,c.jsx)("div",{style:{top:570,left:1235},children:"\ub458\uc9f8"}),(0,c.jsx)("div",{style:{top:620,left:1235},children:"\uc14b\uc9f8"}),(0,c.jsx)("div",{style:{top:670,left:1235},children:"\uc218\uc775\uae08"}),(0,c.jsx)("div",{style:{top:756,left:1235},children:"\uc6d0\uae08"})]}),(0,c.jsxs)("div",{className:a().canvasWrap,children:[(0,c.jsx)("canvas",{width:1920,height:780,onClick:l,onMouseMove:s,onMouseOut:v,ref:t}),function(){var e,t,l,s,o,r;if(-1===n)return null;var v=u();if(!v)return null;var g=v.date,x=v.close,m=(v.low,v.high),y=(v.open,v.highRate),j=v.closeRate,S=v.first,b=v.second,w=v.third,M=v.accEarns,C=new Date(g).toISOString().substring(0,10),T=M+R,B=null!==(e=null===S||void 0===S?void 0:S.winloss)&&void 0!==e?e:0,P=null!==(t=null===b||void 0===b?void 0:b.winloss)&&void 0!==t?t:0,D=null!==(l=null===w||void 0===w?void 0:w.winloss)&&void 0!==l?l:0;B=B>0?0:B,P=P>0?0:P,D=D>0?0:D;var k=(null!==(s=null===S||void 0===S?void 0:S.winloss)&&void 0!==s?s:0)/1e3,E=(null!==(o=null===b||void 0===b?void 0:b.winloss)&&void 0!==o?o:0)/1e3,N=(null!==(r=null===w||void 0===w?void 0:w.winloss)&&void 0!==r?r:0)/1e3;k=k>0?0:k,E=E>0?0:E,N=N>0?0:N;var L=100*(T/R-1),Z=Math.min(i.Z.dropDecimal((M+B+P+D)/T*100,2),0),Y=i.Z.dropDecimal(k+E+N,2);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:a().crosshairX,style:{left:n>-1?6*n*p+2*p:void 0,display:-1===n?"none":void 0}}),(0,c.jsx)("div",{className:a().crosshairY,style:{top:f>-1?f:void 0,display:-1===f?"none":void 0}}),(0,c.jsx)("div",{className:a().mouseDate,style:{left:n>-1?6*n*p+10:void 0,display:-1===n?"none":void 0},children:C}),(0,c.jsx)("div",{className:a().mousePrice,style:{top:f>-1?f:void 0,display:-1===f?"none":void 0},children:i.Z.dropDecimal(h(),2)}),(0,c.jsxs)("div",{className:a().info,style:{left:6*n*p+10},children:[(0,c.jsx)("div",{children:C}),(0,c.jsxs)("div",{children:["\uc885\uac00 : ",(0,c.jsxs)("span",{style:d(j),children:[x,"$ (",j>0&&"+",j,"%)"]})]}),(0,c.jsxs)("div",{children:["\uace0\uac00 : ",(0,c.jsxs)("span",{style:d(j),children:[m,"$ (",y>0&&"+",y,"%)"]})]})]}),_(S,0),_(b,1),_(w,2),(0,c.jsxs)("div",{className:a().total,style:{left:6*n*p+10,top:670},children:[(0,c.jsxs)("div",{children:["\ucd1d \uc218\uc775 : ",i.Z.dropDecimal(M,2),"$"]}),(0,c.jsxs)("div",{children:["\uc2e4\ud604 \uc218\uc775\ub960 : ",i.Z.dropDecimal(L,2),"%"]}),(0,c.jsxs)("div",{children:["\uc6d0\uae08 \uc190\uc2e4\ud3ed : ",(0,c.jsxs)("span",{style:d(Z),children:[Z,"%"]})]}),(0,c.jsxs)("div",{children:["\ubcf5\ub9ac \uc190\uc2e4\ud3ed : ",(0,c.jsxs)("span",{style:d(Y),children:[Y,"%"]})]})]})]})}()]}),(0,c.jsx)("div",{style:{marginLeft:30},children:(0,c.jsxs)("div",{children:["\uc885\ubaa9: ",(0,c.jsx)("select",{onChange:function(e){return g(e.currentTarget.value)},children:Object.keys(o.c).map((function(e){return(0,c.jsx)("option",{value:e,children:e},e)}))})]})})]})},v=function(){return(0,c.jsx)(f,{})}},7438:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tlp/chart",function(){return l(3650)}])},5628:function(e){e.exports={graphWrap:"TLPChart_graphWrap___nG5a",canvasWrap:"TLPChart_canvasWrap__lI3pH",crosshairY:"TLPChart_crosshairY__ivYNM",crosshairX:"TLPChart_crosshairX__Y9RIP",mouseDate:"TLPChart_mouseDate__1Ss6q",mousePrice:"TLPChart_mousePrice__0iku2",info:"TLPChart_info__x1ELU",pig:"TLPChart_pig__V9az9",total:"TLPChart_total__1b_y_",zoom:"TLPChart_zoom__rWCZx",legend:"TLPChart_legend__ZLm42"}}},function(e){e.O(0,[802,472,825,774,888,179],(function(){return t=7438,e(e.s=t);var t}));var t=e.O();_N_E=t}]);