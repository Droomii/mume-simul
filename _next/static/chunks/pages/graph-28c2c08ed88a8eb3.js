(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{2852:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return f}});var l=o(7294),i=o(7092),r=o(5825),s=function(){var e=(0,l.useRef)(null),t=(0,l.useState)(null),o=t[0],s=t[1],a=(0,l.useState)(0),n=a[0],c=a[1],d=(0,l.useState)(-1),u=d[0],f=d[1],v=(0,l.useState)(-1),h=v[0],p=v[1],g=(0,l.useState)(-1),m=g[0],R=g[1],y=(0,l.useState)(-1),M=y[0],x=y[1],S=(0,r.Z)(),b=S.record,w=S.setActiveByIdx,_=S.getRecordByIdx;(0,l.useEffect)((function(){e.current&&s(e.current.getContext("2d"))}),[]),(0,l.useEffect)((function(){if(o&&e.current){var t=1,l=b.slice(n,n+200).map((function(e){var o=e.date,l=e.accEarns,i=e.low,r=e.high,s=e.open,a=e.close,n=e.split,c=e.first,d=e.second,u=e.third;return n&&(t*=n),{date:o,accEarns:l,split:n,low:i*t,high:r*t,open:s*t,close:a*t,first:c?{costBasis:c.costBasis*t,over10:c.costBasis*t*1.1,earn:c.earnDiff,progress:c.progressRate,winloss:c.winloss}:null,second:d?{costBasis:d.costBasis*t,over5:d.costBasis*t*1.05,over10:d.costBasis*t*1.1,earn:d.earnDiff,progress:d.progressRate,winloss:d.winloss}:null,third:u?{costBasis:u.costBasis*t,over5:u.costBasis*t*1.05,over10:u.costBasis*t*1.1,earn:u.earnDiff,progress:u.progressRate,winloss:u.winloss}:null}})),r=.9*l.reduce((function(e,t){var o=t.low,l=t.open,i=t.close,r=t.high;return Math.min(o,l,i,r,e)}),Number.MAX_VALUE),s=1.1*l.reduce((function(e,t){var o=t.low,l=t.open,i=t.close,r=t.high;return Math.max(o,l,i,r,e)}),Number.MIN_VALUE);R(r/t),x(s/t);var a=function(e){return Math.floor(500*i.Z.normalize(e,r,s))};l.forEach((function(e,t){e.low=a(e.low),e.high=a(e.high),e.close=a(e.close),e.open=a(e.open),e.first&&(e.first.over10=a(e.first.over10),e.first.costBasis=a(e.first.costBasis)),e.second&&(e.second.costBasis=a(e.second.costBasis),e.second.over5=a(e.second.over5),e.second.over10=a(e.second.over10)),e.third&&(e.third.costBasis=a(e.third.costBasis),e.third.over5=a(e.third.over5),e.third.over10=a(e.third.over10))})),o.clearRect(0,0,9999,9999);var d=520;l.forEach((function(e,t){var l=e.date,i=6*t,r=new Date(l);r.toISOString().substring(0,7);r.getMonth()%2&&r.getMonth()%2&&(o.fillStyle="#fafafa",o.fillRect(i,0,6,770))})),o.clearRect(0,501,9999,20);var u=new Date(l[0].date).getMonth();l.forEach((function(e,t){var l=e.date,i=6*t,r=new Date(l),s=r.toISOString().substring(0,7);u!==r.getMonth()&&(o.fillStyle="#7a7a7a",o.textBaseline="hanging",o.font="15px sans",o.fillText(s,i,502),u=r.getMonth())})),o.fillStyle="#bebebe",o.fillRect(0,500,1200,1),o.fillRect(0,d,1200,1),o.fillRect(0,570,1200,1),o.fillRect(0,620,1200,1),o.fillRect(0,670,1200,1),o.fillRect(0,770,1200,1),o.fillRect(1200,0,1,501),o.fillRect(1200,d,1,251);for(var f=1e5,v=1;v<10;v++)o.fillStyle="#f5f5f5",o.fillRect(0,50*v,1200,1);l.forEach((function(e,t){var r,s,a,n,c,u,v,h,p,g=e.split,m=(e.date,e.accEarns),R=e.low,y=e.high,M=e.open,x=e.close,S=e.first,b=e.third,w=e.second,_=6*t;if(!S&&null!==(r=l[t-1])&&void 0!==r&&r.first){var B=l[t-1].first;o.fillStyle="rgba(67,142,255,0.3)",o.fillRect(_,500-B.over10,6,B.over10-B.costBasis)}else S&&(o.fillStyle="rgba(67,142,255,0.3)",o.fillRect(_,500-S.over10,6,S.over10-S.costBasis),o.fillStyle=i.Z.getProgressColor(S.progress),o.fillRect(_,570,6,-S.progress/2+1),S.earn&&(o.strokeStyle="rgb(80,151,255)",o.beginPath(),o.moveTo(_,d),o.lineTo(_,570),o.stroke(),o.closePath()));if(!w&&null!==(s=l[t-1])&&void 0!==s&&s.second){var Z=l[t-1].second;o.fillStyle="rgba(255,174,67,0.3)",o.fillRect(_,500-Z.over10,6,Z.over10-Z.over5),o.fillRect(_,500-Z.over10,6,Z.over10-Z.costBasis)}else w&&(o.fillStyle="rgba(255,174,67,0.3)",o.fillRect(_,500-w.over10,6,w.over10-w.over5),o.fillRect(_,500-w.over10,6,w.over10-w.costBasis),o.fillStyle=i.Z.getProgressColor(w.progress),o.fillRect(_,620,6,-w.progress/2+1),w.earn&&(o.strokeStyle="rgb(80,151,255)",o.beginPath(),o.moveTo(_,571),o.lineTo(_,620),o.stroke(),o.closePath()));if(!b&&null!==(a=l[t-1])&&void 0!==a&&a.third){var D=l[t-1].third;o.strokeStyle="rgba(230,67,255,0.58)",o.fillStyle="rgba(202,67,255,0.3)",o.fillRect(_,500-D.over10,6,D.over10-D.costBasis)}else b&&(o.fillStyle="rgba(202,67,255,0.3)",o.fillRect(_,500-b.over10,6,b.over10-b.costBasis),o.fillRect(_,500-b.over10,6,b.over10-b.over5),o.fillStyle=i.Z.getProgressColor(b.progress),o.fillRect(_,670,6,-b.progress/2+1),b.earn&&(o.strokeStyle="rgb(80,151,255)",o.beginPath(),o.moveTo(_,621),o.lineTo(_,670),o.stroke(),o.closePath()));o.fillStyle=M<x?"#e51a1c":"#0f7cc4",o.fillRect(_+2,500-y,1,y-R),o.fillRect(_,500-Math.max(M,x),5,Math.max(Math.abs(x-M),1));var j=f+m,E=Math.ceil(f/j*100),k=Math.floor(m/j*100);o.fillStyle="rgba(196,140,0,0.3)",o.fillRect(_,671,6,k),o.fillStyle="rgba(0,77,196,0.3)",o.fillRect(_,770,6,-E);var C=null!==(n=null===S||void 0===S?void 0:S.winloss)&&void 0!==n?n:0,N=null!==(c=null===w||void 0===w?void 0:w.winloss)&&void 0!==c?c:0,P=null!==(u=null===b||void 0===b?void 0:b.winloss)&&void 0!==u?u:0;C=C>0?0:C,N=N>0?0:N,P=P>0?0:P;var T=(null!==(v=null===S||void 0===S?void 0:S.winloss)&&void 0!==v?v:0)/1e3,X=(null!==(h=null===w||void 0===w?void 0:w.winloss)&&void 0!==h?h:0)/1e3,G=(null!==(p=null===b||void 0===b?void 0:b.winloss)&&void 0!==p?p:0)/1e3;T=T>0?0:T,X=X>0?0:X,G=G>0?0:G;var I=Math.floor((j+C+N+P)/j*100),O=Math.floor(T+X+G);o.fillStyle="rgba(196,0,0,0.3)",o.fillRect(_,671,6,100-I),o.fillRect(_,671,6,-O),g&&(o.beginPath(),o.strokeStyle="red",o.fillStyle="red",o.moveTo(_+3,0),o.lineTo(_+3,500),o.stroke(),o.closePath(),o.textBaseline="bottom",o.font="12px sans",o.fillText("\uc561\uba74\ubd84\ud560(".concat(g,":1)"),_+5,500))})),o.clearRect(1201,0,1e3,1e3),o.fillStyle="#bebebe";for(var h=s-r,p=(Math.floor(h/10),1);p<10;p++)o.fillRect(1201,50*p,3,1),o.font="12px sans",o.textBaseline="middle",o.fillText("".concat(i.Z.dropDecimal((s-h*p*.1)/t,2)),1210,50*p);o.fillRect(0,0,1,501),o.fillRect(0,0,1201,1),o.fillRect(0,d,1,251);var g=function(e){var t=n+(e.deltaY>0?10:-10);c(Math.min(Math.max(0,t),b.length-200))};return e.current.addEventListener("wheel",g),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("wheel",g)}}}),[o,n,b]);return{canvasRef:e,handleClickCanvas:function(e){var t=e.currentTarget.getBoundingClientRect(),o=t.x,l=t.y,i=e.pageX-o,r=e.pageY-l;if(i<1200&&r<500){var s=Math.floor(i/6);w(b.slice(n)[s].idx)}},handleMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),o=t.x,l=t.y,i=e.pageX-o,r=e.pageY-l,s=Math.floor(i/6);i<1200&&r<500?(f(s),p(r)):i<1200?(f(s),p(-1)):(f(-1),p(-1))},mouseX:u,mouseY:h,handleMouseOut:function(){f(-1),p(-1)},getMouseRecord:function(){return _(b.slice(n)[u].idx)},getMousePrice:function(){return M-(M-m)*h/500}}},a=o(6063),n=o.n(a),c=o(5893),d=function(e){return{color:e>0?"red":e<0?"blue":void 0}},u=function(){var e=s(),t=e.canvasRef,o=e.handleClickCanvas,l=e.handleMouseMove,r=e.mouseX,a=e.mouseY,u=e.handleMouseOut,f=e.getMouseRecord,v=e.getMousePrice,h=function(e,t){return e?(0,c.jsxs)("div",{style:{top:520+50*t,left:6*r+10},className:n().pig,children:[(0,c.jsxs)("div",{children:["\uc9c4\ud589\ub960 : ",e.progressRate,"%"]}),(0,c.jsxs)("div",{children:["\uc190\uc775\ub960 : ",(0,c.jsxs)("span",{style:d(e.boughtRate),children:[e.boughtRate>=0&&"+",e.boughtRate,"%"]})]}),!!e.earnDiff&&(0,c.jsxs)("div",{children:["\uc218\uc775\uae08 : ",(0,c.jsxs)("span",{style:{color:"red"},children:[i.Z.dropDecimal(e.earnDiff,2),"$"]})]})]}):null};return(0,c.jsxs)("div",{className:n().graphWrap,children:[(0,c.jsxs)("div",{className:n().legend,children:[(0,c.jsx)("div",{style:{top:520,left:1235},children:"\uccab\uc9f8"}),(0,c.jsx)("div",{style:{top:570,left:1235},children:"\ub458\uc9f8"}),(0,c.jsx)("div",{style:{top:620,left:1235},children:"\uc14b\uc9f8"}),(0,c.jsx)("div",{style:{top:670,left:1235},children:"\uc218\uc775\uae08"}),(0,c.jsx)("div",{style:{top:756,left:1235},children:"\uc6d0\uae08"})]}),(0,c.jsxs)("div",{className:n().canvasWrap,children:[(0,c.jsx)("canvas",{width:1920,height:800,onClick:o,onMouseMove:l,onMouseOut:u,ref:t}),function(){var e,t,o,l,s,u;if(-1===r)return null;var p=f(),g=p.date,m=p.close,R=(p.low,p.high),y=(p.open,p.highRate),M=p.closeRate,x=p.first,S=p.second,b=p.third,w=p.accEarns,_=new Date(g).toISOString().substring(0,10),B=w+1e5,Z=null!==(e=null===x||void 0===x?void 0:x.winloss)&&void 0!==e?e:0,D=null!==(t=null===S||void 0===S?void 0:S.winloss)&&void 0!==t?t:0,j=null!==(o=null===b||void 0===b?void 0:b.winloss)&&void 0!==o?o:0;Z=Z>0?0:Z,D=D>0?0:D,j=j>0?0:j;var E=(null!==(l=null===x||void 0===x?void 0:x.winloss)&&void 0!==l?l:0)/1e3,k=(null!==(s=null===S||void 0===S?void 0:S.winloss)&&void 0!==s?s:0)/1e3,C=(null!==(u=null===b||void 0===b?void 0:b.winloss)&&void 0!==u?u:0)/1e3;E=E>0?0:E,k=k>0?0:k,C=C>0?0:C;var N=B/1e3-100,P=Math.min(i.Z.dropDecimal((w+Z+D+j)/B*100,2),0),T=i.Z.dropDecimal(E+k+C,2);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:n().crosshairX,style:{left:r>-1?6*r+2:void 0,display:-1===r?"none":void 0}}),(0,c.jsx)("div",{className:n().crosshairY,style:{top:a>-1?a:void 0,display:-1===a?"none":void 0}}),(0,c.jsx)("div",{className:n().mouseDate,style:{left:r>-1?6*r+10:void 0,display:-1===r?"none":void 0},children:_}),(0,c.jsx)("div",{className:n().mousePrice,style:{top:a>-1?a:void 0,display:-1===a?"none":void 0},children:i.Z.dropDecimal(v(),2)}),(0,c.jsxs)("div",{className:n().info,style:{left:6*r+10},children:[(0,c.jsx)("div",{children:_}),(0,c.jsxs)("div",{children:["\uc885\uac00 : ",(0,c.jsxs)("span",{style:d(M),children:[m,"$ (",M>0&&"+",M,"%)"]})]}),(0,c.jsxs)("div",{children:["\uace0\uac00 : ",(0,c.jsxs)("span",{style:d(M),children:[R,"$ (",y>0&&"+",y,"%)"]})]})]}),h(x,0),h(S,1),h(b,2),(0,c.jsxs)("div",{className:n().total,style:{left:6*r+10,top:670},children:[(0,c.jsxs)("div",{children:["\ucd1d \uc218\uc775 : ",i.Z.dropDecimal(w,2),"$"]}),(0,c.jsxs)("div",{children:["\uc2e4\ud604 \uc218\uc775\ub960 : ",i.Z.dropDecimal(N,2),"%"]}),(0,c.jsxs)("div",{children:["\uc6d0\uae08 \uc190\uc2e4\ud3ed : ",(0,c.jsxs)("span",{style:d(P),children:[P,"%"]})]}),(0,c.jsxs)("div",{children:["\ubcf5\ub9ac \uc190\uc2e4\ud3ed : ",(0,c.jsxs)("span",{style:d(T),children:[T,"%"]})]})]})]})}()]})]})},f=function(){return(0,c.jsx)(u,{})}},5825:function(e,t,o){"use strict";var l=o(7294),i=o(1802),r=o(7092);t.Z=function(){var e=(0,l.useState)(-1),t=e[0],o=e[1],s=(0,l.useState)(0),a=s[0],n=s[1],c=(0,l.useState)(100),d=c[0],u=c[1],f=(0,l.useState)(6e4),v=f[0],h=f[1],p=(0,l.useState)(3e4),g=p[0],m=(p[1],(0,l.useState)(1e4)),R=m[0],y=(m[1],(0,l.useState)([])),M=y[0],x=y[1];(0,l.useEffect)((function(){!function(){var e=0,o=0,l=0,s=0,a=0,n=0,c=!1,d=!1,u=0,f=!1,h=0,p=0,m=0,y=0,M=0,S=0,b=!1,w=!1,_=0,B=!1,Z=0,D=0,j=0,E=0,k=0,C=0,N=0,P=!1,T=!1,X=0,G=0,I=i.Z.map((function(x,I,O){var Y,A,L,W,$,F,U,V,q,H,z,J,K,Q,ee,te,oe=x.date,le=r.Z.dropDecimal(x.high*x.ratio,2,Math.round),ie=r.Z.dropDecimal(x.close*x.ratio,2,Math.round),re=r.Z.dropDecimal(x.low*x.ratio,2,Math.round),se=r.Z.dropDecimal(x.open*x.ratio,2,Math.round),ae=(r.Z.dropDecimal(r.Z.getRsi(i.Z.slice(I-14,I).map((function(e){return e.close}))),2),r.Z.dropDecimal(100*(i.Z[I].close/(null!==(Y=null===(A=i.Z[I-1])||void 0===A?void 0:A.close)&&void 0!==Y?Y:i.Z[I].close)-1),2)),ne=r.Z.dropDecimal(100*(i.Z[I].high/(null!==(L=null===(W=i.Z[I-1])||void 0===W?void 0:W.close)&&void 0!==L?L:i.Z[I].close)-1),2);c&&(d=!0),b&&(w=!0),P&&(T=!0),function(){if(d&&(e=0,o=0,l=0,s=0,c=!1,d=!1,f=!1,u=0),-1!==t&&oe>=t&&!d)if(x.split&&(s*=x.split,o*=x.split),u++,oe===t)V=Math.floor(v/30/ie),s=V,l=V*ie;else{H=l/s;var i=Math.min(v/30,v-l);if(i<ie&&(f=!0,i=0),q=100*(ie/H-1),H=Math.round(l/s*100)/100,100*(le/H-1)>=10)return n+=.1*l,s=0,l=0,c=!0,void(f=!1);q>0&&(i/=2);var r=Math.floor(i/ie);r&&(s+=r,l+=r*ie)}}(),function(){if(w)return h=0,p=0,m=0,y=0,b=!1,w=!1,B=!1,void(_=0);var e=l/v>=.5;if((e||_)&&!Z)if(x.split&&(y*=x.split,p*=x.split),_++,oe===t)z=Math.floor(g/30/ie),y=z,m=z*ie;else{K=m/y;var o=Math.min(g/30,g-m);o<ie&&(B=!0,o=0),J=100*(ie/K-1);var i=m/g>=.5;if(K=Math.round(m/y*100)/100,i){if(100*(le/K-1)>=5){var r=Math.floor(y/4);S+=r*K*.05,m-=K*r,y-=r,B=!1}if(J>=0){var s=Math.floor(y/4),a=K*s;S+=ie*s-a,m-=a,y-=s,B=!1}}else if(J>=5){var n=Math.floor(y/4);if(n){var c=K*n;S+=ie*n-c,m-=c,y-=n,B=!1}}if(100*(le/K-1)>=10)return S+=.1*K,y=0,m=0,b=!0,Z=e?4:0,void(B=!1);J>0&&(i?o=0:J<=5?o/=2:o=0);var d=Math.floor(o/ie);d&&(y+=d,m+=d*ie)}Z&&Z--}(),function(){if(T)return D=0,j=0,E=0,k=0,P=!1,T=!1,void(X=0);if(!f||!B)return N+=ie*k-E,k=0,E=0,void(P=!0);if(x.split&&(k*=x.split,j*=x.split),X++,oe===t)Q=Math.floor(R/30/ie),k=Q,E=Q*ie;else{te=E/k;var e=Math.min(R/30,R-E);e<ie&&(e=0),ee=100*(ie/te-1);var o=E/R>=.5;if(te=Math.round(E/k*100)/100,o){if(100*(le/te-1)>=5){var l=Math.floor(k/4),i=te*l;N+=te*i*.05,E-=i,k-=l}if(ee>=0){var r=Math.floor(k/4),s=te*r;N+=ie*r-s,E-=s,k-=r}}else if(ee>=5){var a=Math.floor(k/4);if(a){var n=te*a;N+=ie*a-n,E-=n,k-=a}}if(100*(le/te-1)>=10)return N+=.1*te,k=0,E=0,void(P=!0);ee>0&&(o?e=0:ee<=5?e/=2:e=0);var c=Math.floor(e/ie);c&&(k+=c,E+=c*ie)}}();var ce=r.Z.dropDecimal(100*(ie/(null!==($=H)&&void 0!==$?$:ie)-1),2)||0,de=r.Z.dropDecimal(l/v*100,2),ue=H?(ie-H)*s:0,fe=l-e,ve=n-a,he=s-o;o=s,e=l,a=n;var pe=r.Z.dropDecimal(100*(ie/(null!==(F=K)&&void 0!==F?F:ie)-1),2)||0,ge=r.Z.dropDecimal(m/g*100,2),me=K?(ie-K)*y:0,Re=m-h,ye=S-M,Me=y-p;p=y,h=m,M=S;var xe=r.Z.dropDecimal(100*(ie/(null!==(U=te)&&void 0!==U?U:ie)-1),2)||0,Se=r.Z.dropDecimal(E/R*100,2),be=te?(ie-te)*k:0,we=E-D,_e=N-C;C=N;var Be=k-j;return j=k,D=E,{accEarns:G+=ve+ye+_e,date:oe,idx:I,split:x.split,high:le,highRate:ne,close:ie,closeRate:ae,open:se,low:re,first:-1!==t&&oe>=t&&!d?{day:u,progressRate:de,totalBought:l,earnDiff:ve,totalBoughtStockCount:s,totalEarns:n,winloss:ue,boughtRate:ce,costBasis:l/s||0,buySell:fe,buySellCount:he}:void 0,second:_?{day:_,progressRate:ge,totalBought:m,earnDiff:ye,totalBoughtStockCount:y,totalEarns:S,winloss:me,costBasis:m/y||0,boughtRate:pe,buySell:Re,buySellCount:Me}:void 0,third:X?{day:X,progressRate:Se,totalBought:E,earnDiff:_e,totalBoughtStockCount:k,totalEarns:N,winloss:be,costBasis:E/k||0,boughtRate:xe,buySell:we,buySellCount:Be}:void 0}}));x(I)}()}),[t]);var S=(0,l.useRef)(null);return{seedRef:S,seed1:v,setSeed1:h,handleEnter:function(e){var t;"Enter"===e.key&&S.current&&h(null===(t=S.current)||void 0===t?void 0:t.valueAsNumber)},record:M,startIdx:a,endIdx:d,active:t,setActiveByIdx:function(e){o(M[e].date)},getRecordByIdx:function(e){return M[e]},handleClickRow:function(e,l){o(t===e?-1:e)},handleScroll:function(e){var t=e.currentTarget,o=t.scrollTop;o+t.clientHeight>=t.scrollHeight&&(n(Math.min(i.Z.length-100,a+50)),u(Math.min(i.Z.length,d+50))),o<=0&&(u(Math.max(100,d-50)),n(Math.max(0,a-50)),a-50>0&&e.currentTarget.scroll(0,10))}}}},9439:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graph",function(){return o(2852)}])},6063:function(e){e.exports={graphWrap:"Graph_graphWrap__XJiG6",canvasWrap:"Graph_canvasWrap__UXvfi",crosshairY:"Graph_crosshairY__keVXu",crosshairX:"Graph_crosshairX__7obBY",mouseDate:"Graph_mouseDate__hAvmy",mousePrice:"Graph_mousePrice__qF3Lr",info:"Graph_info__2unuM",pig:"Graph_pig__ZppAq",total:"Graph_total__Lo8KX",legend:"Graph_legend__viOFg"}}},function(e){e.O(0,[187,774,888,179],(function(){return t=9439,e(e.s=t);var t}));var t=e.O();_N_E=t}]);